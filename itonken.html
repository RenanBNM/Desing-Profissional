<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Controle Parental - Simula√ß√£o</title>
    <!-- Carrega o Tailwind CSS para design moderno e responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
      }
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body class="bg-gray-900 text-gray-100 antialiased p-4">
    <!-- Bot√£o de Voltar ao In√≠cio -->
    <a
      href="./safegame_web_app.html"
      class="inline-block mb-8 text-blue-400 hover:underline font-bold transition-colors"
      >&larr; Voltar para o In√≠cio</a
    >

    <h1
      class="text-3xl md:text-4xl font-extrabold text-center text-blue-400 mb-6"
    >
      Autoriza√ß√£o dos Pais (Simula√ß√£o)
    </h1>

    <!-- Container centralizado para todo o conte√∫do do formul√°rio -->
    <div class="flex flex-col items-center">
      <div class="w-full max-w-xl">
        <div
          class="card bg-gray-800 p-6 rounded-xl shadow-lg my-4"
          id="requestCard"
        >
          <h2 class="text-2xl font-semibold mb-4 text-center">
            Solicitar Acesso
          </h2>
          <label for="childId" class="block font-semibold mb-1"
            >Usu√°rio da crian√ßa:</label
          >
          <input
            id="childId"
            placeholder="ex: joaozinho123"
            class="w-full p-3 mb-4 bg-gray-700 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />

          <label for="parentPhone" class="block font-semibold mb-1"
            >Telefone do respons√°vel:</label
          >
          <input
            id="parentPhone"
            placeholder="ex: +55 11 99999-9999"
            class="w-full p-3 mb-4 bg-gray-700 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />

          <button
            id="requestBtn"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition-transform transform hover:scale-105"
          >
            Enviar iToken (simulado)
          </button>
          <p id="requestMsg" class="mt-4 text-center"></p>
          <div
            class="sim-sms hidden bg-gray-700 p-4 rounded-lg border border-dashed border-gray-500 mt-4"
            id="simSms"
          ></div>
        </div>

        <div
          class="card hidden bg-gray-800 p-6 rounded-xl shadow-lg my-4"
          id="verifyCard"
        >
          <h2 class="text-2xl font-semibold mb-4 text-center">
            Validar iToken
          </h2>
          <label for="token" class="block font-semibold mb-1"
            >Digite o iToken recebido:</label
          >
          <input
            id="token"
            maxlength="6"
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            class="w-full p-3 mb-4 bg-gray-700 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />

          <button
            id="verifyBtn"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition-transform transform hover:scale-105"
          >
            Validar e liberar jogo
          </button>
          <p id="verifyMsg" class="mt-4 text-center"></p>
        </div>

        <div
          class="card hidden bg-gray-800 p-6 rounded-xl shadow-lg my-4"
          id="gameCard"
        >
          <h2 class="text-2xl font-semibold mb-4 text-center">
            Jogo Liberado ‚úÖ
          </h2>
          <button
            id="playBtn"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition-transform transform hover:scale-105"
          >
            Iniciar Jogo
          </button>
          <div
            id="gameArea"
            class="hidden text-center text-gray-400 p-4 mt-4 border border-gray-600 rounded-lg"
          >
            üéÆ Aqui estaria o jogo real (placeholder).
          </div>
        </div>
      </div>
    </div>

    <script>
      let generatedToken = null;

      const requestBtn = document.getElementById("requestBtn");
      const verifyBtn = document.getElementById("verifyBtn");
      const requestMsg = document.getElementById("requestMsg");
      const verifyMsg = document.getElementById("verifyMsg");
      const simSms = document.getElementById("simSms");

      function show(el) {
        el.classList.remove("hidden");
      }
      function hide(el) {
        el.classList.add("hidden");
      }

      requestBtn.addEventListener("click", () => {
        const childId = document.getElementById("childId").value.trim();
        const parentPhone = document.getElementById("parentPhone").value.trim();
        if (!childId || !parentPhone) {
          requestMsg.textContent = "Preencha todos os campos.";
          requestMsg.className = "text-red-400";
          return;
        }
        // Gera token aleat√≥rio de 6 d√≠gitos
        generatedToken = String(Math.floor(100000 + Math.random() * 900000));
        requestMsg.textContent = "iToken gerado e enviado (simula√ß√£o).";
        requestMsg.className = "text-green-400";
        // Usando crases para o template literal
        simSms.textContent = `üì≤ SMS simulado para ${parentPhone}: Seu iToken para liberar ${childId} √© ${generatedToken}`;
        show(simSms);
        show(document.getElementById("verifyCard"));
      });

      verifyBtn.addEventListener("click", () => {
        const typedToken = document.getElementById("token").value.trim();
        if (typedToken === generatedToken) {
          verifyMsg.textContent = "Acesso liberado!";
          verifyMsg.className = "text-green-400";
          hide(document.getElementById("verifyCard"));
          show(document.getElementById("gameCard"));
        } else {
          verifyMsg.textContent = "Token inv√°lido. Tente novamente.";
          verifyMsg.className = "text-red-400";
        }
      });

      document.getElementById("playBtn").addEventListener("click", () => {
        show(document.getElementById("gameArea"));
      });
    </script>
  </body>
</html>
